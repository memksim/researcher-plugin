README.md
  e543c27 1,3,5,7-11,13,15,17,19,21-23,25-29,31,33,35,37
---
{
  "schema_version": "authorship/3.0.0",
  "base_commit_sha": "initial",
  "prompts": {
    "e543c27": {
      "agent_id": {
        "tool": "claude",
        "id": "eb8e9d33-5be8-4821-85bb-c39c0f5bccec",
        "model": "glm-5"
      },
      "human_author": "m.kosenko <m.kosenko@vk.team>",
      "messages": [
        {
          "type": "user",
          "text": "Напиши README кратко на англ",
          "timestamp": "2026-02-26T16:47:48.251Z"
        },
        {
          "type": "tool_use",
          "name": "Glob",
          "input": {
            "pattern": "**/*"
          },
          "timestamp": "2026-02-26T16:48:08.091Z"
        },
        {
          "type": "user",
          "text": "/Users/m.kosenko/Desktop/Projects/researcher-plugin/LICENSE\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/skills/research/examples/RESEARCH.md\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/skills/research/SKILL.md\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.gitignore\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.claude-plugin/plugin.json\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.idea/researcher-plugin.iml\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.idea/modules.xml\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/info/exclude\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/description\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/hooks/commit-msg.sample\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/hooks/pre-rebase.sample\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/hooks/sendemail-validate.sample\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/hooks/pre-commit.sample\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/hooks/applypatch-msg.sample\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/hooks/fsmonitor-watchman.sample\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/hooks/pre-receive.sample\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/hooks/prepare-commit-msg.sample\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/hooks/post-update.sample\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/hooks/pre-merge-commit.sample\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/hooks/pre-applypatch.sample\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/hooks/pre-push.sample\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/hooks/update.sample\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/hooks/push-to-checkout.sample\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/config\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/HEAD\n/Users/m.kosenko/Desktop/Projects/researcher-plugin/.git/ai/rewrite_log",
          "timestamp": "2026-02-26T16:48:08.732Z"
        },
        {
          "type": "tool_use",
          "name": "Read",
          "input": {
            "file_path": "/Users/m.kosenko/Desktop/Projects/researcher-plugin/.claude-plugin/plugin.json"
          },
          "timestamp": "2026-02-26T16:48:17.227Z"
        },
        {
          "type": "tool_use",
          "name": "Read",
          "input": {
            "file_path": "/Users/m.kosenko/Desktop/Projects/researcher-plugin/skills/research/SKILL.md"
          },
          "timestamp": "2026-02-26T16:48:17.790Z"
        },
        {
          "type": "user",
          "text": "     1→---\n     2→name: research\n     3→description: Explains code with visual diagrams and advice improvements. Use when explaining how code works, teaching about a codebase, or when the user asks \"How does this work?\"\n     4→allowed-tools: Read, Grep, Glob\n     5→---\n     6→## Purpose\n     7→Study a requested code fragment (or a target feature/module) *together with nearby code*, explain how it works, produce **sequence** and **dependency** diagrams, identify **bugs / risky spots / poor style**, and propose a **task backlog** to improve the situation.\n     8→**All user-facing text and the saved report must be strictly in English.**\n     9→\n    10→## When to use\n    11→Use this skill when the user asks to:\n    12→- \"analyze code\", \"explain how it works\", \"find bugs\", \"assess quality\", \"draw diagrams\"\n    13→- or provides a snippet / file / symbol / module path and wants analysis.\n    14→\n    15→## Inputs (what to ask for if missing)\n    16→- Entry point: file path(s), class/function name(s), or a snippet.\n    17→- Goal: what scenario to analyze (happy path, error path, edge cases).\n    18→- Scope: \"only this file\" vs \"whole module/feature\".\n    19→> You should always clarify when the context is not enough.\n    20→\n    21→## Constraints\n    22→- **Write strictly in language as is user question language** in:\n    23→    - chat response\n    24→    - the resulting `RESEARCH.md`\n    25→- Always create/update a report file named **`RESEARCH.md`** in the repository root (or current working directory).\n    26→- If `RESEARCH.md` already exists and contains any non-whitespace content:\n    27→    - **Stop and ask the user**: \"Can I overwrite RESEARCH.md?\"\n    28→    - Do not overwrite until the user explicitly allows.\n    29→- Prefer concrete, code-referenced findings: file paths, symbol names, line ranges when available.\n    30→- Diagrams must be generated in **Mermaid**.\n    31→\n    32→## Workflow\n    33→### 1) Locate and expand context\n    34→1. Identify the entry file(s)/symbol(s).\n    35→2. Pull surrounding context:\n    36→    - same package/module\n    37→    - direct dependencies (imports, constructor params, injected deps)\n    38→    - callers and callees\n    39→    - interfaces + implementations\n    40→    - config/build files if relevant (Gradle, DI modules, routing)\n    41→3. Build a context map:\n    42→    - key types\n    43→    - key flows\n    44→    - boundaries (UI / domain / data / network / storage)\n    45→\n    46→### 2) Explain behavior\n    47→- what the code does\n    48→- control flow (main path + important branches)\n    49→- state & side effects\n    50→- threading/coroutines/executors (if applicable)\n    51→- error handling strategy\n    52→\n    53→### 3) Sequence diagram (Mermaid)\n    54→Pick **one main scenario** (the most representative path):\n    55→- e.g., “пользователь нажал кнопку → запрос → кеш → UI обновился”\n    56→  Include:\n    57→- components (UI/ViewModel/UseCase/Repo/API/DB/etc.)\n    58→- async boundaries\n    59→- retries, errors, cancellation if relevant\n    60→\n    61→Output Mermaid block:\n    62→```mermaid\n    63→sequenceDiagram\n    64→    participant UI\n    65→    participant VM as ViewModel\n    66→    participant UC as UseCase\n    67→    participant REPO as Repository\n    68→    participant API as ApiClient\n    69→    participant DB as Database\n    70→\n    71→    UI->>VM: Запросить данные\n    72→    VM->>UC: Выполнить сценарий\n    73→    UC->>REPO: Получить данные\n    74→\n    75→    alt Есть в кеше\n    76→        REPO->>DB: Прочитать кеш\n    77→        DB-->>REPO: Данные\n    78→    else Нет в кеше\n    79→        REPO->>API: HTTP запрос\n    80→        API-->>REPO: Ответ\n    81→        REPO->>DB: Сохранить кеш\n    82→    end\n    83→\n    84→    REPO-->>UC: Вернуть результат\n    85→    UC-->>VM: Результат\n    86→    VM-->>UI: Обновить экран\n    87→```\n    88→\n    89→### 4) Dependency diagram (Mermaid)\n    90→Produce a dependency graph showing:\n    91→modules/layers (at least)\n    92→key classes/interfaces\n    93→direction of dependency\n    94→mark external systems (network, DB, OS, SDK)\n    95→Output Mermaid block:\n    96→```mermaid\n    97→graph TD\n    98→    UI[UI слой] --> VM[ViewModel]\n    99→    VM --> UC[UseCase]\n   100→    UC --> REPO[Repository]\n   101→    REPO --> API[ApiClient]\n   102→    REPO --> DB[Database]\n   103→```\n   104→\n   105→### 5) Vulnerable spots / bugs / bad style\n   106→Must include:\n   107→Bugs (logic errors, NPE risks, race conditions)\n   108→Security/privacy risks (token handling, logging sensitive data, cleartext, insecure storage)\n   109→Stability risks (timeouts, retries, backoff, cancellation leaks)\n   110→Performance risks (heavy work on main thread, allocations, O(n²), Compose recomposition traps)\n   111→Maintainability/style (naming, coupling, SRP violations, missing tests)\n   112→For each finding, provide:\n   113→Severity: Критично / Высоко / Средне / Низко\n   114→Evidence: file/symbol reference\n   115→Why it matters\n   116→Suggested fix (short)\n   117→\n   118→### 6) Proposed task backlog\n   119→Generate a prioritized backlog with:\n   120→P0 (must fix), P1, P2\n   121→scope and acceptance criteria\n   122→quick wins vs structural work\n   123→test plan items (unit/integration/e2e)\n   124→Output requirements\n   125→A) Chat response (Russian)\n   126→Short executive summary\n   127→Link to what was saved in RESEARCH.md\n   128→If you could not access some files, state that explicitly.\n   129→B) Write RESEARCH.md (Russian)\n   130→Structure exactly like this:\n   131→```\n   132→# Исследование кода\n   133→## Контекст и границы\n   134→## Что делает код\n   135→## Ключевые сценарии\n   136→## Диаграмма последовательностей\n   137→## Диаграмма зависимостей\n   138→## Риски, баги и плохие места\n   139→## Рекомендованный план работ\n   140→## Вопросы и допущения\n   141→```\n   142→Both diagrams must be embedded as Mermaid blocks.\n   143→Overwrite policy for RESEARCH.md\n   144→If RESEARCH.md does not exist OR exists but is empty/whitespace → write it.\n   145→If it exists and has content:\n   146→Ask the user: “RESEARCH.md уже заполнен. Можно перезаписать?”\n   147→If user says yes → overwrite полностью (not append), then proceed.\n   148→If user says no → do not modify the file; instead propose a new filename like RESEARCH_<topic>_<date>.md (but only if user asks for an alternative).\n   149→Quality bar\n   150→No vague “возможно” без проверки: prefer confirming via code search.\n   151→Diagrams must match the described flow and dependencies.\n   152→Findings must be actionable.\n   153→Keep Russian technical language clear and grounded in the codebase.\n   154→Safety notes\n   155→Do not output secrets (tokens, private keys). If found in code/logs, redact and treat as Критично.\n   156→Avoid recommending insecure practices (e.g., cleartextTrafficPermitted=true without strong justification and mitigations).\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n",
          "timestamp": "2026-02-26T16:48:17.951Z"
        },
        {
          "type": "user",
          "text": "     1→{\n     2→  \"name\": \"researcher\",\n     3→  \"description\": \"Tools for code base research and analysis.\",\n     4→  \"version\": \"0.0.1\",\n     5→  \"author\": {\n     6→    \"name\": \"Maksim Kosenko\"\n     7→  }\n     8→}\n     9→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n",
          "timestamp": "2026-02-26T16:48:17.952Z"
        },
        {
          "type": "tool_use",
          "name": "Read",
          "input": {
            "file_path": "/Users/m.kosenko/Desktop/Projects/researcher-plugin/skills/research/examples/RESEARCH.md"
          },
          "timestamp": "2026-02-26T16:48:26.765Z"
        },
        {
          "type": "user",
          "text": "     1→# Code Research\n     2→\n     3→## Context and boundaries\n     4→\n     5→Object of research: game list loading feature.\n     6→\n     7→Entry points:\n     8→- GamesScreen\n     9→- GamesViewModel\n    10→- GetGamesUseCase\n    11→- GamesRepositoryImpl\n    12→- GamesApi\n    13→- GamesDao\n    14→\n    15→Boundaries:\n    16→- UI layer: Compose screen + ViewModel\n    17→- Domain layer: UseCase\n    18→- Data layer: Repository + API + Database\n    19→- External systems: HTTP backend, local DB\n    20→\n    21→Architecture style: MVVM + Repository pattern.\n    22→\n    23→---\n    24→\n    25→## What the code does\n    26→\n    27→Scenario:\n    28→1. User opens screen.\n    29→2. UI calls loadGames() method on ViewModel.\n    30→3. ViewModel launches a coroutine.\n    31→4. UseCase delegates work to Repository.\n    32→5. Repository:\n    33→    - first checks cache in DB,\n    34→    - if no data or it's stale — executes HTTP request,\n    35→    - saves result to DB,\n    36→    - returns data up the chain.\n    37→6. ViewModel updates state.\n    38→7. UI redraws.\n    39→\n    40→Features:\n    41→- Uses suspend functions.\n    42→- Errors are passed as Result.Error.\n    43→- No explicit retry strategy.\n    44→- No timeouts at Repository level.\n    45→\n    46→---\n    47→\n    48→## Key scenarios\n    49→\n    50→### 1. Happy path (data in cache)\n    51→- Data returns instantly.\n    52→- Network not used.\n    53→\n    54→### 2. Cold start (cache empty)\n    55→- HTTP request executed.\n    56→- Response saved to DB.\n    57→- UI updated.\n    58→\n    59→### 3. Network error\n    60→- Repository returns error.\n    61→- ViewModel passes it to state.\n    62→- UI shows snackbar.\n    63→\n    64→---\n    65→\n    66→## Sequence diagram\n    67→\n    68→```mermaid\n    69→sequenceDiagram\n    70→    participant UI as \"GamesScreen\"\n    71→    participant VM as \"GamesViewModel\"\n    72→    participant UC as \"GetGamesUseCase\"\n    73→    participant REPO as \"GamesRepository\"\n    74→    participant API as \"GamesApi\"\n    75→    participant DB as \"GamesDao\"\n    76→\n    77→    UI->>VM: loadGames()\n    78→    VM->>UC: execute()\n    79→    UC->>REPO: getGames()\n    80→\n    81→    alt Data in cache\n    82→        REPO->>DB: loadFromCache()\n    83→        DB-->>REPO: List<Game>\n    84→    else Cache empty\n    85→        REPO->>API: fetchGames()\n    86→        API-->>REPO: List<Game>\n    87→        REPO->>DB: saveGames()\n    88→    end\n    89→\n    90→    REPO-->>UC: List<Game>\n    91→    UC-->>VM: List<Game>\n    92→    VM-->>UI: updateState()\n    93→```\n    94→\n    95→## Dependency diagram\n    96→```mermaid\n    97→graph TD\n    98→    UI[\"GamesScreen\"] --> VM[\"GamesViewModel\"]\n    99→    VM --> UC[\"GetGamesUseCase\"]\n   100→    UC --> REPO[\"GamesRepository\"]\n   101→    REPO --> API[\"GamesApi\"]\n   102→    REPO --> DB[\"GamesDao\"]\n   103→```\n   104→## Risks, bugs and problem areas\n   105→1. No HTTP request timeout\n   106→   Severity: High\n   107→   Risk: UI hanging on poor network.\n   108→   Solution: configure timeout in HTTP client.\n   109→2. No retry strategy\n   110→   Severity: Medium\n   111→   Risk: single network failure breaks UX.\n   112→   Solution: add retry with exponential backoff.\n   113→3. Repository knows too much\n   114→   Severity: Medium\n   115→   Risk: SRP violation, testing complexity.\n   116→   Solution: extract CacheDataSource and RemoteDataSource.\n   117→4. No explicit cache staleness check\n   118→   Severity: Medium\n   119→   Risk: user may see old data.\n   120→   Solution: add timestamp + TTL.\n   121→5. No cancellation handling\n   122→   Severity: Low\n   123→   Risk: work leaks during rapid screen closing.\n   124→   Solution: ensure viewModelScope is used.\n   125→\n   126→### Recommended work plan\n   127→#### P0\n   128→  - Add HTTP timeout.\n   129→  - Add IOException handling with clear error.\n   130→\n   131→#### P1\n   132→- Extract RemoteDataSource and CacheDataSource.\n   133→- Add retry with backoff.\n   134→\n   135→#### P2\n   136→- Add cache TTL.\n   137→- Cover UseCase with unit tests.\n   138→- Cover Repository with integration test.\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n",
          "timestamp": "2026-02-26T16:48:27.174Z"
        },
        {
          "type": "tool_use",
          "name": "Write",
          "input": {
            "content": "# Researcher Plugin\n\nA Claude Code plugin for code analysis and research.\n\n## Features\n\n- **Code Explanation**: Analyzes code with visual diagrams and analogies\n- **Sequence Diagrams**: Generates Mermaid sequence diagrams for key scenarios\n- **Dependency Graphs**: Creates dependency diagrams showing module relationships\n- **Risk Assessment**: Identifies bugs, security issues, and code smells\n- **Task Backlog**: Generates prioritized improvement recommendations\n\n## Installation\n\nPlace this plugin in your Claude Code plugins directory.\n\n## Usage\n\nUse the `/research` skill to analyze code:\n\n```\n/research path/to/file.kt\n```\n\nThe skill will:\n1. Analyze the requested code and its dependencies\n2. Generate sequence and dependency diagrams\n3. Identify risks and problem areas\n4. Create a `RESEARCH.md` report with findings\n\n## Example Output\n\nSee `skills/research/examples/RESEARCH.md` for a sample report.\n\n## License\n\nMIT\n",
            "file_path": "/Users/m.kosenko/Desktop/Projects/researcher-plugin/README.md"
          },
          "timestamp": "2026-02-26T16:48:45.486Z"
        }
      ],
      "total_additions": 24,
      "total_deletions": 0,
      "accepted_lines": 24,
      "overriden_lines": 0
    }
  }
}
